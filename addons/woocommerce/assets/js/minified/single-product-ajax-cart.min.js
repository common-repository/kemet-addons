!function(r){"undefined"!=typeof kemet&&(KmtSingleProductAjax={init:function(){this._bind()},_bind:function(){r(document.body).on("click","#kmt-qv-content .product:not(.product-type-external) button.single_add_to_cart_button",KmtSingleProductAjax._addToCartRequest),kemet.single_ajax_add_to_cart&&r(document).on("click","body.single-product .product:not(.product-type-external) button.single_add_to_cart_button",KmtSingleProductAjax._addToCartRequest),r(document.body).on("added_to_cart",KmtSingleProductAjax._updateButton)},_addToCartRequest:function(t){t.preventDefault();t=r(this).closest("form");if(!t[0].checkValidity())return t[0].reportValidity(),!1;var d,e,a=r(this),t=r(this).val();a.hasClass("disabled")||(a.removeClass("added"),a.addClass("loading"),d=r('input[name="quantity"]').val(),r(".woocommerce-grouped-product-list-item").length&&(e=r("input.qty"),d=[],r.each(e,function(t,e){var a=r(this).attr("name");a=(a=a.replace("quantity[","")).replace("]",""),a=parseInt(a),r(this).val()&&(d[a]=r(this).val())})),e=r("form.cart").serialize(),r.ajax({url:kemet.ajax_url,type:"POST",data:"action=kemet_add_cart_single_product&add-to-cart="+t+"&"+e,success:function(t){r(document.body).trigger("wc_fragment_refresh"),r(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,a]),"yes"===wc_add_to_cart_params.cart_redirect_after_add&&(window.location=wc_add_to_cart_params.cart_url)}}))},_updateButton:function(t,e,a,d){d=void 0!==d&&d,r("button.single_add_to_cart_button").length&&(r(d).removeClass("loading"),r(d).addClass("added"),kemet.is_cart||0!==r(d).parent().find(".added_to_cart").length||r(d).after(' <a href="'+kemet.cart_url+'" class="added_to_cart wc-forward" title="'+kemet.view_cart+'">'+kemet.view_cart+"</a>"),r(document.body).trigger("wc_cart_button_updated",[d]))}},r(function(){KmtSingleProductAjax.init()}))}(jQuery);